<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="postmessage/postmessage.js"></script>
    <script type="text/javascript" src="logging.js"></script>

    <title>Logging Test</title>
</head>
<body>

<form name="writeLog" action="#" onsubmit="noSubmit()">
    <input type="button" id="levelButton" value="Level"/>
    <label for="areaText">Area:</label>
    <input type="text" id="areaText" value="Ohio"/>
    <label for="logLevelSelect">Level:</label>
    <select id="logLevelSelect"> </select>
    <label for="messageText">Message:</label>
    <input type="text" id="messageText" value="Read Me!"/>
    <input type="button" id="logButton" value="Log"/>
</form>

<script type="text/javascript">
    function noSubmit() {
        return false;
    }

    $(document).ready(function() {
        $('input select').each(function() {
            var $this = $(this);
            $this.attr('name', $this.attr('id'));
        });

        var logLevelSelect = $('#logLevelSelect');
        var defaults = log.areaDefaults();
        for (var levelName in log.levels) {
            var opt = $('<option>' + levelName + '</option>');
            if (levelName == defaults.level) {
                opt.attr('selected', 'selected');
            }
            logLevelSelect.append(opt);
        }

        function logLevel() {
            return $('#logLevelSelect :selected').val();
        }

        function doLog() {
            log.log($('#areaText').val(), logLevel(), $('#messageText').val());
        }

        function doLevel() {
            log.area($('#areaText').val(), {level: logLevel()});
        }

        $('#logButton').click(doLog);
        $('#levelButton').click(doLevel);
    });
</script>
</body>
</html>